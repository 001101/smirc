pkgname=smirc
pkgrel=1
pkgdesc='System monitor IRC bot'
url='https://github.com/epiphyte/smirc'
license=('MIT')
depends=('python' 'python-pyzmq' 'python-irc' 'python-systemd')
makedepends=('git' 'python-setuptools')
source=("git+$url")
sha256sums=('SKIP')
backup=('etc/epiphyte.d/smirc.json')

build() {
  cd ${srcdir}/$pkgname/smirc
  sed -i "s/__VERSION__/$pkgver-$pkgrel/g" smirc.py
}

package() {
  cd ${srcdir}/$pkgname
  python setup.py install --root="$pkgdir/" --optimize=1
  install -Dm 644 example.json ${pkgdir}/etc/epiphyte.d/smirc.json
  install -Dm 644 service/smirc.service ${pkgdir}/usr/lib/systemd/system/smirc.service
}
